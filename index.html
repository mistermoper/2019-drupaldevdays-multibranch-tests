<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Multibranch tests with Drupal , Jenkins and Docker | DrupalDevDays 2019</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">
		<link rel="stylesheet" href="css/custom.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="sponsor">
			<img src="assets/images/event-logo.png" class="logo"/><span>Multibranch tests with Drupal , Jenkins and Docker<strong>@omarlopesino</strong> | http://tiny.cc/ufsw6y</span>
		</div>
		<div class="reveal">
			<div class="slides">

				<!-- Cover -->
				<section data-background-transition="slide" data-background="assets/images/background-front.png" class="left">
					<div class="left">
						<img src="assets/images/event-logo.png" class="medium"/>
					</div>
					<div class="featured-box-primary left">
						<h1>Multibranch tests with Drupal , Jenkins and Docker</h1>
						<em>Quality assurance development workflow</em>
						<div class="xxsmall">http://goo.gl/@TODO</div>
					</div>

					<div class="featured-box-secondary left xsmall">
						Omar Lopesino /
						<span class="small">@omarlopesino</span>
					</div>

					<div class="featured-box-primary left xsmall inline-block" style="float:right">
						#DrupalDevDays
					</div>

				</section>

				<!-- Personal presentation -->
				<section data-background="assets/images/background-secondary.png">
					<div><img src="assets/images/personal-square.jpg" class="profile-photo"></div>
					<h4>Omar Lopesino</h4>
					<div class="xsmall"><em>Drupal Developer</em></div>
					<div class="small"><a href="https://twitter.com/omarlopesino" target="_blank">@omarlopesino</a></div>
					<p class="xsmall"><a href="https://drupal.org/u/mistermoper" target="_blank">drupal.org/u/mistermoper</a><br><span class="xsmall">Contributed modules: entity_statistics, slickquiz_field...</span></p>
					<img src="assets/images/metadrop-logo.svg" class="metadrop-logo">
				</section>

				<!-- START -->

				<section>
					<p class="medium left"><em>In this session we will see:</em></p>
					<ol>
						<li>Why multibranch testing?</li>
						<li>Jenkins multibranch testing example</li>
						<li>How to build</li>
						<li>Live example</li>
						<li>What more can we do</li>
						<li>Conclussions</li>
					</ol>
				</section>


				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<h2>Why multibranch testing</h2>
				</section>

				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<h2>Objective</h2>
					<img src="assets/images/objective.png">
				</section>

				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<h2>Branch model</h2>
					<img src="assets/images/git-model.png">
					<p> Source: <a href="https://backlog.com/git-tutorial/branching-workflows/" target="_blank">Branching workflows</a></p>
				</section>

				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<h2>What to test</h2>
					<img src="assets/images/what-to-test-2.png">
				</section>

				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<h2>But should I have to run all these tests manually?</h2>
					<img src="assets/images/blank-2022544_960_720.png" style="width:300px">
				</section>


				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<h2>Jenkins to the rescue!</h2>
					<img src="assets/images/JenkinsRescue.png"  style="width:800px">
				</section>

				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<h2>Parallel testing</h2>
					<img src="assets/images/parallel-testing.png">
					<img src="assets/images/docker.png">
				</section>

				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<em>Second</em>
					<h2>Jenkins multibranch testing example</h2>
				</section>

				<section>
					<p class="medium left"><em>Jenkins multibranch testing example</em></p>
					<p class="small center">Automated tests for each git repository branch.</p>
					<img src="assets/images/automated-tests-bitbucket.jpg">
				</section>

				<section>
					<p class="medium left"><em>Jenkins multibranch testing example</em></p>
					<p class="small center">Automated tests for each git repository branch.</p>
					<img src="assets/images/automated-tests.jpg">
				</section>
	
				<section>
					<p class="medium left"><em>Jenkins multibranch testing example</em></p>
					<p class="small center">Automated tests for each git repository branch.</p>
					<img src="assets/images/what-to-test-jenkins.jpg">
				</section>

				<section>
					<p class="medium left"><em>Jenkins multibranch testing example</em></p>
					<p class="small center">Automated tests for each git repository branch.</p>
					<img src="assets/images/what-to-test-2.png">
				</section>

				<section>
					<p class="medium left"><em>Jenkins multibranch testing example</em></p>
					<p class="xsmall left"><em>Code static analysis</em></p>
					<img src="assets/images/checkstyle-warnings.jpg">
				</section>

				<section>
					<p class="medium left"><em>Jenkins multibranch testing example</em></p>
					<p class="xsmall left"><em>Test results (junit)</em></p>
					<img src="assets/images/test-result.jpg">
				</section>

				<section>
					<p class="medium left"><em>Jenkins multibranch testing example</em></p>
					<p class="xsmall left"><em>Notification</em></p>
					<img src="assets/images/notified.jpg">
				</section>


				<section>
					<p class="medium left"><em>Basic concepts</em></p>
					<ol>
						<li>Jenkins: open source automation server.</li>
						<li>Job: automated task.</li>
						<li>Docker: software to create applications inside containers in one package.</li>
						<li>Docker compose: docker container configuration written in yml files.</li>
					</ol>
				</section>
				
				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Why Jenkins and Docker?</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Why Jenkins and Docker?</li>
						<li>Develop a docker infraestructure for drupal</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Why Jenkins and Docker?</li>
						<li>Develop a docker infraestructure for drupal:
							<ul>
								<li><a href="https://github.com/wodby/docker4drupal">Docker4Drupal</a></li>
								<li>Website: php, apache, mysql</li>
							</ul>
						</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Why Jenkins and Docker?</li>
						<li>Develop a docker infraestructure for drupal:
							<ul>
								<li><a href="https://github.com/wodby/docker4drupal">Docker4Drupal</a></li>
								<li>Website: php, apache, mysql</li>
							</ul>
						</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Develop a docker infraestructure for drupal:
							<ul>
								<li><a href="https://github.com/wodby/docker4drupal">Docker4Drupal</a></li>
								<li>Website: php, apache, mysql</li>
								<li>Build tools: <a href="https://github.com/wodby/node">node to build theming assets.</a></li>
								<!-- @NOTE: recommend stretch version !-->
							</ul>
						</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Install the jenkins plugins required for multibranch:
							<ul>
								<li><a href="https://wiki.jenkins.io/display/JENKINS/Pipeline+Plugin">Pipeline</a></li>
								<li><a href="https://wiki.jenkins.io/display/JENKINS/Pipeline+Multibranch+Plugin">Pipeline multibranch</li>
							</ul>
						</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Another Jenkins plugins:
							<ul>
								<li><a href="https://jenkinsci.github.io/job-dsl-plugin/">JobDSL</a></li>
								<!-- @TODO Jobdsl image. -->
							</ul>
						</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Another Jenkins plugins:
							<ul>
								<li><a href="https://jenkinsci.github.io/job-dsl-plugin/">JobDSL</a></li>
								<li><a href="https://github.com/jenkinsci/bitbucket-build-status-notifier-plugin">Bitbucket status notifier</a> / <a href="https://github.com/jenkinsci/gitlab-plugin">Gitlab plugin</a></li>
								<!-- @TODO Show metadrop commits and build status. -->
							</ul>
						</li>
					</ol>
				</section>


				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Another Jenkins plugins:
							<ul>
								<li><a href="https://jenkinsci.github.io/job-dsl-plugin/">JobDSL</a></li>
								<li><a href="https://github.com/jenkinsci/bitbucket-build-status-notifier-plugin">Bitbucket status notifier</a> / <a href="https://github.com/jenkinsci/gitlab-plugin">Gitlab plugin</a></li>
								<li><a href="https://wiki.jenkins.io/display/JENKINS/Slack+Plugin">Slack integration</a></li>
								<!-- @TODO Show metadrop channel (only messages and the build status message. -->
							</ul>
						</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Create the Jenkinsfile</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Create the Jenkinsfile</li>
						<li>Create the job</li>
					</ol>
				</section>

				<section>
					<p class="medium left"><em>Let's see a demo!</em></p>
				</section>

				<section>
					<p class="xsmall left"><em>How to build with Jenkins and Docker</em></p>
					<ol>
						<li>Create the Jenkinsfile</li>
						<li>Create the job</li>
						<li>Alternative: jobdsl</li>
					</ol>
				</section>


				<section>
					<p class="medium left"><em>Let's see a demo!</em></p>
				</section>

				<section>
					<p class="xsmall left"><em>What more can we do</em></p>
					<ol>
						<li>Module updates (new versions, securities)</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>Module updates (new versions, securities)</em></p>
					<ol>
						<image src="assets/images/module-update.jpg"></image>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>What we can test in a Drupal site?</em></p>
					<ol>
						<li>Module updates (new versions, securities)</li>
						<li>System updates (PHP, mysql...)</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>System updates (PHP, mysql...)</em></p>
					<ol>
						<image src="assets/images/automated-tests-2.jpg"></image>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>What we can test in a Drupal site?</em></p>
					<ol>
						<li>Module updates (new versions, securities)</li>
						<li>System updates (PHP, mysql...)</li>
						<li>Code static analysis</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>Code static analysis</em></p>
					<ol>
						<image src="assets/images/checkstyle-warnings.jpg"></image>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>What we can test in a Drupal site?</em></p>
					<ol>
						<li>Module updates (new versions, securities)</li>
						<li>System updates (PHP, mysql...)</li>
						<li>Code static analysis</li>
						<li>Site-specific functionalities (unit / functional tests)</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>What we can test in a Drupal site?</em></p>
					<ol>
						<li>Module updates (new versions, securities)</li>
						<li>System updates (PHP, mysql...)</li>
						<li>Code static analysis</li>
						<li>Site-specific functionalities (unit / functional tests)</li>
						<li>Rest services for decoupled sites</li>
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>Rest services for decoupled sites</em></p>
					<ol>
						<image src="assets/images/example-drupal-project.jpg"></image>
						<!-- @TODO IMAGE showing postman resources and results. -->
					</ol>
				</section>

				<section>
					<p class="xsmall left"><em>What we can test in a Drupal site?</em></p>
					<ol>
						<li>Module updates (new versions, securities)</li>
						<li>PHP version updates</li>
						<li>Code static analysis</li>
						<li>Site-specific functionalities (unit / functional tests)</li>
						<li>Rest services for decoupled sites</li>
						<li>More!</li>
					</ol>
				</section>

				<section data-background="assets/images/background-secondary.png" data-background-image="assets/images/background-secondary.png" class="present" style="top: 253px; display: block;">
					<em>Fourth</em>
					<h2>How to build with Jenkins and Docker</h2>
				</section>

				<section data-background="assets/images/background-primary.png">
					<h3>Any questions?</h3>
				</section>

				<section data-background="assets/images/background-primary.png">
					<h4>Thanks!!!</h4>
					<div class="small white">@omarlopesino</div>
					<div><img src="assets/images/metadrop-logo-white.svg" class="medium"></div>
					<div><img src="assets/images/event-logo.png" class="medium"/></div>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
